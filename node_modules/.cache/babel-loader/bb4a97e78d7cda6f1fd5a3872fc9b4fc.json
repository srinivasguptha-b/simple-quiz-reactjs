{"ast":null,"code":"var _jsxFileName = \"/var/www/html/quiz-react/quiz-app/dwquiz/src/LoginPage.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport { GoogleLogin } from 'react-google-login';\nimport AppContext from './libs/contextLib';\nimport { useLocation, useHistory } from \"react-router-dom\";\n\nconst LoginPage = ({\n  navigation\n}) => {\n  const {\n    setIsAuthenticated,\n    setUserData\n  } = useContext(AppContext);\n  let history = useHistory();\n  let redirectTo = new URLSearchParams(useLocation().search).get('RedirectTo');\n\n  if (redirectTo != \"\") {\n    history.push(redirectTo);\n  }\n\n  const handleLogin = async googleData => {\n    const res = await fetch(\"/test/g-auth.php\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        token: googleData.tokenId\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    const Logindata = await res.json();\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        func: 'register_login_user',\n        data: Logindata\n      })\n    };\n    fetch(\"/test/quiz_apis/post_requests.php\", requestOptions).then(response => response.json()).then(data => {\n      localStorage.setItem('userdata', JSON.stringify(data.data));\n      setUserData(data.data);\n      setIsAuthenticated(true);\n    }); // store returned user somehow\n  };\n\n  return /*#__PURE__*/React.createElement(GoogleLogin, {\n    clientId: \"293677709302-icb6g950tk8q3vvia8i692f4ogu7l88p.apps.googleusercontent.com\",\n    buttonText: \"Log in with Google\",\n    onSuccess: handleLogin,\n    onFailure: handleLogin,\n    cookiePolicy: 'single_host_origin',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default LoginPage;","map":{"version":3,"sources":["/var/www/html/quiz-react/quiz-app/dwquiz/src/LoginPage.js"],"names":["React","useState","useEffect","useContext","GoogleLogin","AppContext","useLocation","useHistory","LoginPage","navigation","setIsAuthenticated","setUserData","history","redirectTo","URLSearchParams","search","get","push","handleLogin","googleData","res","fetch","method","body","JSON","stringify","token","tokenId","headers","Logindata","json","requestOptions","func","data","then","response","localStorage","setItem"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,SAASC,WAAT,EAAsBC,UAAtB,QAAwC,kBAAxC;;AAEA,MAAMC,SAAS,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAoB;AAClC,QAAM;AAAEC,IAAAA,kBAAF;AAAsBC,IAAAA;AAAtB,MAAsCR,UAAU,CAACE,UAAD,CAAtD;AACA,MAAIO,OAAO,GAAGL,UAAU,EAAxB;AACA,MAAIM,UAAU,GAAG,IAAIC,eAAJ,CAAoBR,WAAW,GAAGS,MAAlC,EAA0CC,GAA1C,CAA8C,YAA9C,CAAjB;;AACA,MAAIH,UAAU,IAAI,EAAlB,EAAsB;AAClBD,IAAAA,OAAO,CAACK,IAAR,CAAaJ,UAAb;AACH;;AACD,QAAMK,WAAW,GAAG,MAAMC,UAAN,IAAoB;AAEpC,UAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,kBAAD,EAAqB;AACxCC,MAAAA,MAAM,EAAE,MADgC;AAExCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBC,QAAAA,KAAK,EAAEP,UAAU,CAACQ;AADD,OAAf,CAFkC;AAKxCC,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX;AAL+B,KAArB,CAAvB;AASA,UAAMC,SAAS,GAAG,MAAMT,GAAG,CAACU,IAAJ,EAAxB;AAEA,UAAMC,cAAc,GAAG;AACnBT,MAAAA,MAAM,EAAE,MADW;AAEnBM,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFU;AAGnBL,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEO,QAAAA,IAAI,EAAE,qBAAR;AAA+BC,QAAAA,IAAI,EAAEJ;AAArC,OAAf;AAHa,KAAvB;AAKAR,IAAAA,KAAK,CAAC,mCAAD,EAAsCU,cAAtC,CAAL,CAA2DG,IAA3D,CAAgEC,QAAQ,IAAIA,QAAQ,CAACL,IAAT,EAA5E,EACKI,IADL,CACUD,IAAI,IAAI;AACVG,MAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCb,IAAI,CAACC,SAAL,CAAeQ,IAAI,CAACA,IAApB,CAAjC;AACAtB,MAAAA,WAAW,CAACsB,IAAI,CAACA,IAAN,CAAX;AACAvB,MAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACH,KALL,EAlBoC,CAwBpC;AACH,GAzBD;;AA2BA,sBACI,oBAAC,WAAD;AACI,IAAA,QAAQ,EAAC,0EADb;AAEI,IAAA,UAAU,EAAC,oBAFf;AAGI,IAAA,SAAS,EAAEQ,WAHf;AAII,IAAA,SAAS,EAAEA,WAJf;AAKI,IAAA,YAAY,EAAE,oBALlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AASH,CA3CD;;AA6CA,eAAeV,SAAf","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { GoogleLogin } from 'react-google-login';\nimport AppContext from './libs/contextLib';\nimport { useLocation, useHistory } from \"react-router-dom\";\n\nconst LoginPage = ({ navigation }) => {\n    const { setIsAuthenticated, setUserData } = useContext(AppContext);\n    let history = useHistory();\n    let redirectTo = new URLSearchParams(useLocation().search).get('RedirectTo');\n    if (redirectTo != \"\") {\n        history.push(redirectTo);\n    }\n    const handleLogin = async googleData => {\n\n        const res = await fetch(\"/test/g-auth.php\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                token: googleData.tokenId\n            }),\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        })\n        const Logindata = await res.json();\n\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ func: 'register_login_user', data: Logindata })\n        };\n        fetch(\"/test/quiz_apis/post_requests.php\", requestOptions).then(response => response.json())\n            .then(data => {\n                localStorage.setItem('userdata', JSON.stringify(data.data));\n                setUserData(data.data);\n                setIsAuthenticated(true);\n            });\n        // store returned user somehow\n    }\n\n    return (\n        <GoogleLogin\n            clientId=\"293677709302-icb6g950tk8q3vvia8i692f4ogu7l88p.apps.googleusercontent.com\"\n            buttonText=\"Log in with Google\"\n            onSuccess={handleLogin}\n            onFailure={handleLogin}\n            cookiePolicy={'single_host_origin'}\n        />\n    );\n}\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}