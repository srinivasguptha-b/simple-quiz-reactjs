{"ast":null,"code":"import _toConsumableArray from\"/var/www/html/quiz-react/quiz-app/dwquiz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/var/www/html/quiz-react/quiz-app/dwquiz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import AppContext from'./libs/contextLib';import LoginPage from'./LoginPage';import{Button}from'react-bootstrap';import{useParams,useHistory}from'react-router-dom';var QuizMain=function QuizMain(){var history=useHistory();var questions=[{questionText:'What is the capital of France?',answerOptions:[{answerText:'New York',isCorrect:false},{answerText:'London',isCorrect:false},{answerText:'Paris',isCorrect:true},{answerText:'Dublin',isCorrect:false}]},{questionText:'Who is CEO of Tesla?',answerOptions:[{answerText:'Jeff Bezos',isCorrect:false},{answerText:'Elon Musk',isCorrect:true},{answerText:'Bill Gates',isCorrect:false},{answerText:'Tony Stark',isCorrect:false}]},{questionText:'The iPhone was created by which company?',answerOptions:[{answerText:'Apple',isCorrect:true},{answerText:'Intel',isCorrect:false},{answerText:'Amazon',isCorrect:false},{answerText:'Microsoft',isCorrect:false}]},{questionText:'How many Harry Potter books are there?',answerOptions:[{answerText:'1',isCorrect:false},{answerText:'4',isCorrect:false},{answerText:'6',isCorrect:false},{answerText:'7',isCorrect:true}]}];var _useParams=useParams(),video_url=_useParams.video_url;var _useContext=useContext(AppContext),isAuthenticated=_useContext.isAuthenticated,userData=_useContext.userData;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentQuestion=_useState2[0],setCurrentQuestion=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showScore=_useState4[0],setShowScore=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),score=_useState6[0],setScore=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalScore=_useState8[0],setTotalScore=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),participated=_useState10[0],setParticipated=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),answered=_useState12[0],setAnswered=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),clicked=_useState14[0],setClicked=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),answeredCount=_useState16[0],setAnsweredCount=_useState16[1];var currentVideo=video_url;var _useState17=useState(true),_useState18=_slicedToArray(_useState17,2),isloading=_useState18[0],setIsLoading=_useState18[1];useEffect(function(){if(isAuthenticated){var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({func:'getThisVideoStatus',data:{user_id:userData.user_id,video_id:video_url}})};fetch(\"\".concat(process.env.REACT_APP_API_URL_POST),requestOptions).then(function(response){return response.json();}).then(function(d){setIsLoading(false);if(d.error===-1){history.push(\"/\");}else{if(d.error===0){var answeredCountLocal=d.data.answer_count;var scoreCountLocal=d.data.score_count;if(scoreCountLocal!==\"\"){setScore(parseInt(scoreCountLocal));}if(answeredCountLocal!==\"\"){setAnsweredCount(parseInt(answeredCountLocal));if(answeredCountLocal<questions.length){setCurrentQuestion(parseInt(answeredCountLocal));}else{setShowScore(true);}}}else{alert(\"Something Went wrong, please try again!\");}}});var requestOptionsTotal={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({func:'getTotalScore',data:{user_id:userData.user_id}})};fetch(\"\".concat(process.env.REACT_APP_API_URL_POST),requestOptionsTotal).then(function(response){return response.json();}).then(function(d){if(!d.error){setTotalScore(d.data.score_count);setParticipated(d.data.participated);}});}},[isAuthenticated,showScore,history]);var handleAnswerOptionClick=function handleAnswerOptionClick(answerOption){setClicked([].concat(_toConsumableArray(clicked),[{qtnindex:currentQuestion,ansindex:answerOption.index}]));if(answerOption.isCorrect){setScore(score+1);}var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({func:'save_answer',data:{user_id:userData.user_id,question_id:currentQuestion+1,video_id:currentVideo,answer:answerOption.index,is_correct:answerOption.isCorrect}})};fetch(\"\".concat(process.env.REACT_APP_API_URL_POST),requestOptions).then(function(response){return response.json();}).then(function(d){setAnsweredCount(answeredCount+1);var nextQuestion=currentQuestion+1;setAnswered([].concat(_toConsumableArray(answered),[currentQuestion]));if(nextQuestion<questions.length){setTimeout(function(){setCurrentQuestion(nextQuestion);},1000);}else{setTimeout(function(){setShowScore(true);},1000);}});};var AnswerButton=function AnswerButton(answerOption){var chkvarient=\"secondary\";if(answered.indexOf(currentQuestion)>-1){if(answerOption.isCorrect){chkvarient=\"success\";}else{clicked.map(function(v){if(v.qtnindex===currentQuestion){if(v.ansindex===answerOption.index){chkvarient=\"danger\";}}});}}else{chkvarient=\"secondary\";}return/*#__PURE__*/React.createElement(Button,{variant:chkvarient,className:\"mb-2 w-100\",onClick:function onClick(){return handleAnswerOptionClick(answerOption);},disabled:answered.indexOf(currentQuestion)>-1?\"disabled\":\"\"},\" \",answerOption.answerText,\" \");};return/*#__PURE__*/React.createElement(React.Fragment,null,!isAuthenticated?/*#__PURE__*/React.createElement(LoginPage,null):isloading?/*#__PURE__*/React.createElement(React.Fragment,null,\" Please Wait., Loading..!\"):/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"main col-md-6 d-flex align-items-center justify-content-center\"},showScore?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 text-center\"},/*#__PURE__*/React.createElement(\"p\",null,\"You scored \",score,\" out of \",questions.length),/*#__PURE__*/React.createElement(\"p\",null,\"Participated in \",participated),/*#__PURE__*/React.createElement(\"p\",null,\"Total scored \",totalScore))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"span\",null,\"Question \",currentQuestion+1),\"/\",questions.length),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},questions[currentQuestion].questionText)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},questions[currentQuestion].answerOptions.map(function(answerOption,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"w-100\",key:i},/*#__PURE__*/React.createElement(AnswerButton,Object.assign({index:i},answerOption)));}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"})));};export default QuizMain;","map":{"version":3,"sources":["/var/www/html/quiz-react/quiz-app/dwquiz/src/QuizMain.js"],"names":["React","useState","useEffect","useContext","AppContext","LoginPage","Button","useParams","useHistory","QuizMain","history","questions","questionText","answerOptions","answerText","isCorrect","video_url","isAuthenticated","userData","currentQuestion","setCurrentQuestion","showScore","setShowScore","score","setScore","totalScore","setTotalScore","participated","setParticipated","answered","setAnswered","clicked","setClicked","answeredCount","setAnsweredCount","currentVideo","isloading","setIsLoading","requestOptions","method","headers","body","JSON","stringify","func","data","user_id","video_id","fetch","process","env","REACT_APP_API_URL_POST","then","response","json","d","error","push","answeredCountLocal","answer_count","scoreCountLocal","score_count","parseInt","length","alert","requestOptionsTotal","handleAnswerOptionClick","answerOption","qtnindex","ansindex","index","question_id","answer","is_correct","nextQuestion","setTimeout","AnswerButton","chkvarient","indexOf","map","v","i"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport AppContext from './libs/contextLib';\nimport LoginPage from './LoginPage';\nimport { Button } from 'react-bootstrap';\nimport { useParams, useHistory } from 'react-router-dom';\nconst QuizMain = () => {\n    let history = useHistory();\n    const questions = [\n        {\n            questionText: 'What is the capital of France?',\n            answerOptions: [\n                { answerText: 'New York', isCorrect: false },\n                { answerText: 'London', isCorrect: false },\n                { answerText: 'Paris', isCorrect: true },\n                { answerText: 'Dublin', isCorrect: false },\n            ],\n        },\n        {\n            questionText: 'Who is CEO of Tesla?',\n            answerOptions: [\n                { answerText: 'Jeff Bezos', isCorrect: false },\n                { answerText: 'Elon Musk', isCorrect: true },\n                { answerText: 'Bill Gates', isCorrect: false },\n                { answerText: 'Tony Stark', isCorrect: false },\n            ],\n        },\n        {\n            questionText: 'The iPhone was created by which company?',\n            answerOptions: [\n                { answerText: 'Apple', isCorrect: true },\n                { answerText: 'Intel', isCorrect: false },\n                { answerText: 'Amazon', isCorrect: false },\n                { answerText: 'Microsoft', isCorrect: false },\n            ],\n        },\n        {\n            questionText: 'How many Harry Potter books are there?',\n            answerOptions: [\n                { answerText: '1', isCorrect: false },\n                { answerText: '4', isCorrect: false },\n                { answerText: '6', isCorrect: false },\n                { answerText: '7', isCorrect: true },\n            ],\n        },\n    ];\n    const { video_url } = useParams();\n    const { isAuthenticated, userData } = useContext(AppContext);\n    const [currentQuestion, setCurrentQuestion] = useState(0);\n    const [showScore, setShowScore] = useState(false);\n    const [score, setScore] = useState(0);\n    const [totalScore, setTotalScore] = useState(0);\n    const [participated, setParticipated] = useState(0);\n    const [answered, setAnswered] = useState([]);\n    const [clicked, setClicked] = useState([]);\n    const [answeredCount, setAnsweredCount] = useState(0);\n    const currentVideo = video_url;\n    const [isloading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        if (isAuthenticated) {\n            const requestOptions = {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    func: 'getThisVideoStatus', data: {\n                        user_id: userData.user_id,\n                        video_id: video_url\n                    }\n                })\n            };\n            fetch(`${process.env.REACT_APP_API_URL_POST}`, requestOptions).then(response => response.json())\n                .then(d => {\n                    setIsLoading(false);\n                    if (d.error === -1) {\n                        history.push(\"/\");\n                    } else {\n                        if (d.error === 0) {\n                            let answeredCountLocal = d.data.answer_count;\n                            let scoreCountLocal = d.data.score_count;\n\n                            if (scoreCountLocal !== \"\") {\n                                setScore(parseInt(scoreCountLocal));\n                            }\n                            if (answeredCountLocal !== \"\") {\n                                setAnsweredCount(parseInt(answeredCountLocal));\n                                if (answeredCountLocal < questions.length) {\n                                    setCurrentQuestion(parseInt(answeredCountLocal));\n                                } else {\n                                    setShowScore(true);\n                                }\n                            }\n                        } else {\n                            alert(\"Something Went wrong, please try again!\");\n                        }\n                    }\n                });\n            const requestOptionsTotal = {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    func: 'getTotalScore', data: {\n                        user_id: userData.user_id\n                    }\n                })\n            };\n            fetch(`${process.env.REACT_APP_API_URL_POST}`, requestOptionsTotal).then(response => response.json())\n                .then(d => {\n                    if (!d.error) {\n                        setTotalScore(d.data.score_count);\n                        setParticipated(d.data.participated);\n                    }\n                });\n        }\n    }, [isAuthenticated, showScore, history]);\n\n    const handleAnswerOptionClick = (answerOption) => {\n        setClicked([...clicked, { qtnindex: currentQuestion, ansindex: answerOption.index }]);\n        if (answerOption.isCorrect) {\n            setScore(score + 1);\n        }\n\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                func: 'save_answer', data: {\n                    user_id: userData.user_id,\n                    question_id: currentQuestion + 1,\n                    video_id: currentVideo,\n                    answer: answerOption.index,\n                    is_correct: answerOption.isCorrect\n                }\n            })\n        };\n        fetch(`${process.env.REACT_APP_API_URL_POST}`, requestOptions).then(response => response.json())\n            .then(d => {\n                setAnsweredCount(answeredCount + 1);\n                const nextQuestion = currentQuestion + 1;\n                setAnswered([...answered, currentQuestion]);\n                if (nextQuestion < questions.length) {\n                    setTimeout(function () { setCurrentQuestion(nextQuestion); }, 1000);\n                } else {\n                    setTimeout(function () { setShowScore(true); }, 1000);\n                }\n            });\n    };\n\n\n    const AnswerButton = (answerOption) => {\n        let chkvarient = \"secondary\";\n        if (answered.indexOf(currentQuestion) > -1) {\n            if (answerOption.isCorrect) {\n                chkvarient = \"success\";\n            } else {\n                clicked.map(v => {\n                    if (v.qtnindex === currentQuestion) {\n                        if (v.ansindex === answerOption.index) {\n                            chkvarient = \"danger\"\n                        }\n                    }\n                });\n            }\n\n        } else {\n            chkvarient = \"secondary\"\n        }\n        return (\n            <Button variant={chkvarient} className=\"mb-2 w-100\" onClick={() => handleAnswerOptionClick(answerOption)} disabled={(answered.indexOf(currentQuestion) > -1) ? \"disabled\" : \"\"}> {answerOption.answerText} </Button>\n        );\n    }\n    return (\n        <>\n            {!isAuthenticated ? <LoginPage /> : isloading ? <> Please Wait., Loading..!</> :\n                <div className='row w-100'>\n                    <div className='col-md-3'></div>\n                    <div className='main col-md-6 d-flex align-items-center justify-content-center'>\n\n                        {showScore ? (<>\n                            <div className='col-md-12 text-center'>\n                                <p>You scored {score} out of {questions.length}</p>\n                                <p>Participated in {participated}</p>\n                                <p>Total scored {totalScore}</p>\n                            </div>\n                        </>) : (<>\n                            <>\n                                <div className='col-md-12 mb-2'>\n                                    <div className=''>\n                                        <span>Question {currentQuestion + 1}</span>/{questions.length}\n                                    </div>\n                                    <div className=''>{questions[currentQuestion].questionText}</div>\n                                </div>\n                                <div className='col-md-12'>\n                                    {questions[currentQuestion].answerOptions.map((answerOption, i) => (\n                                        <div className=\"w-100\" key={i}><AnswerButton index={i} {...answerOption} /></div>\n                                    ))}\n                                </div>\n                            </>\n                        </>)}\n                    </div>\n                    <div className='col-md-3'></div>\n                </div>\n            }\n        </>\n    );\n}\nexport default QuizMain;"]},"metadata":{},"sourceType":"module"}